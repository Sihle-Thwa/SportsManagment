@import "tailwindcss";

/* Grid shell: sidebar (col 1), header (row 1), content (row 2) */
.main-container {
  /* Controls the first grid column and the aside width */
  --sidebar-col: 250px;

  display: grid;
  grid-template-columns: var(--sidebar-col) 1fr; /* <-- variable-driven */
  grid-template-rows: auto 1fr; /* header auto height, content fills */
  grid-template-areas:
    "sidebar header"
    "sidebar content";
  height: 100dvh;
  width: 100%;
  max-width: 1400px;
  margin-inline: auto;
  background: hsl(var(--background, 0 0% 100%));
  transition: grid-template-columns 160ms ease; /* smooth track change */
}

/* Regions */
.app-sidebar {
  grid-area: sidebar;
  inline-size: var(--sidebar-col);           /* <-- lock aside to the same var */
  min-inline-size: 64px;
  min-block-size: 0;
  transition: inline-size 160ms ease;        /* smooth width change */
}
.app-topbar {
  grid-area: header;
  min-inline-size: 0;
}
.app-content {
  grid-area: content;
  min-width: 0;
  min-block-size: 0;                          /* <-- allow scroll within grid */
  overflow: auto;
  padding: 16px;
}

/* Visual polish for the top bar (sticky, border, background) */
.app-topbar {
  position: sticky;
  top: 0;
  z-index: 30;
  background: hsl(var(--background, 0 0% 100%));
  border-bottom: 1px solid hsl(var(--border, 214.3 31.8% 91.4%));
}

/* Inner wrapper so existing spacing classes keep working */
.app-topbar-inner { width: 100%; }

/* State classes (set by MainLayout) */
.main-container.is-collapsed { --sidebar-col: 80px; }
.main-container.is-expanded  { --sidebar-col: 250px; }

/* Also react to data attribute (if you prefer not to toggle classes) */
.main-container[data-sidebar-collapsed="true"]  { --sidebar-col: 80px; }
.main-container[data-sidebar-collapsed="false"] { --sidebar-col: 250px; }

/* Responsive: compact default on narrow screens (optional) */
@media (max-width: 1024px) {
  .main-container:not(.is-expanded)[data-sidebar-collapsed="true"] { --sidebar-col: 72px; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .main-container, .app-sidebar { transition: none; }
}
